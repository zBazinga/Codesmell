Class:BalancedShardsAllocator
Field:logger
MethodInvocation:getLogger
Field:INDEX_BALANCE_FACTOR_SETTING
MethodInvocation:floatSetting
Field:SHARD_BALANCE_FACTOR_SETTING
MethodInvocation:floatSetting
Field:THRESHOLD_SETTING
MethodInvocation:floatSetting
Field:weightFunction
Field:threshold
Method-name:BalancedShardsAllocator
Method-returnType:null
Method-parameters:[Settings settings]
Method-name:BalancedShardsAllocator
Method-returnType:null
Method-parameters:[Settings settings, ClusterSettings clusterSettings]
MethodInvocation:setWeightFunction
MethodInvocation:get
MethodInvocation:get
MethodInvocation:setThreshold
MethodInvocation:get
MethodInvocation:addSettingsUpdateConsumer
MethodInvocation:addSettingsUpdateConsumer
Method-name:setWeightFunction
Method-returnType:void
Method-parameters:[float indexBalance, float shardBalanceFactor]
Method-name:setThreshold
Method-returnType:void
Method-parameters:[float threshold]
FieldAccess:threshold
Method-name:allocate
Method-returnType:void
Method-parameters:[RoutingAllocation allocation]
MethodInvocation:size
MethodInvocation:routingNodes
MethodInvocation:failAllocationOfNewPrimaries
MethodInvocation:allocateUnassigned
MethodInvocation:moveShards
MethodInvocation:balance
Method-name:decideShardAllocation
Method-returnType:ShardAllocationDecision
Method-parameters:[final ShardRouting shard, final RoutingAllocation allocation]
MethodInvocation:unassigned
MethodInvocation:decideAllocateUnassigned
MethodInvocation:newHashSet
MethodInvocation:decideMove
MethodInvocation:isDecisionTaken
MethodInvocation:canRemain
MethodInvocation:decideRebalance
MethodInvocation:withRemainDecision
MethodInvocation:getCanRemainDecision
Method-name:failAllocationOfNewPrimaries
Method-returnType:void
Method-parameters:[RoutingAllocation allocation]
Method-name:getThreshold
Method-returnType:float
Method-parameters:[]
Method-name:getIndexBalance
Method-returnType:float
Method-parameters:[]
Method-name:getShardBalance
Method-returnType:float
Method-parameters:[]
Class:WeightFunction
Field:indexBalance
Field:shardBalance
Field:theta0
Field:theta1
Method-name:WeightFunction
Method-returnType:null
Method-parameters:[float indexBalance, float shardBalance]
FieldAccess:indexBalance
FieldAccess:shardBalance
Method-name:weight
Method-returnType:float
Method-parameters:[Balancer balancer, ModelNode node, String index]
MethodInvocation:numShards
MethodInvocation:avgShardsPerNode
MethodInvocation:numShards
MethodInvocation:avgShardsPerNode
Class:Balancer
Field:logger
Field:nodes
Field:allocation
Field:routingNodes
Field:weight
Field:threshold
Field:metadata
Field:avgShardsPerNode
Field:sorter
Method-name:Balancer
Method-returnType:null
Method-parameters:[Logger logger, RoutingAllocation allocation, WeightFunction weight, float threshold]
FieldAccess:logger
FieldAccess:allocation
FieldAccess:weight
FieldAccess:threshold
FieldAccess:routingNodes
MethodInvocation:routingNodes
FieldAccess:metadata
MethodInvocation:metadata
MethodInvocation:getTotalNumberOfShards
MethodInvocation:size
MethodInvocation:unmodifiableMap
MethodInvocation:buildModelFromAssigned
MethodInvocation:newNodeSorter
Method-name:nodesArray
Method-returnType:ModelNode[]
Method-parameters:[]
MethodInvocation:toArray
MethodInvocation:values
MethodInvocation:size
Method-name:avgShardsPerNode
Method-returnType:float
Method-parameters:[String index]
MethodInvocation:getTotalNumberOfShards
MethodInvocation:index
MethodInvocation:size
Method-name:avgShardsPerNode
Method-returnType:float
Method-parameters:[]
Method-name:newNodeSorter
Method-returnType:NodeSorter
Method-parameters:[]
MethodInvocation:nodesArray
Method-name:absDelta
Method-returnType:float
Method-parameters:[float lower, float higher]
Method-name:lessThan
Method-returnType:boolean
Method-parameters:[float delta, float threshold]
Method-name:balance
Method-returnType:void
Method-parameters:[]
MethodInvocation:isTraceEnabled
MethodInvocation:trace
MethodInvocation:hasPendingAsyncFetch
MethodInvocation:debug
MethodInvocation:type
MethodInvocation:canRebalance
MethodInvocation:deciders
MethodInvocation:trace
MethodInvocation:size
MethodInvocation:trace
MethodInvocation:balanceByWeights
Method-name:decideRebalance
Method-returnType:MoveDecision
Method-parameters:[final ShardRouting shard]
Method-name:balanceByWeights
Method-returnType:void
Method-parameters:[]
MethodInvocation:deciders
MethodInvocation:buildWeightOrderedIndices
MethodInvocation:index
MethodInvocation:getIndex
MethodInvocation:type
MethodInvocation:canAllocate
MethodInvocation:getRoutingNode
MethodInvocation:reset
MethodInvocation:numShards
MethodInvocation:absDelta
MethodInvocation:lessThan
MethodInvocation:absDelta
MethodInvocation:isTraceEnabled
MethodInvocation:trace
MethodInvocation:getNodeId
MethodInvocation:getNodeId
MethodInvocation:isTraceEnabled
MethodInvocation:trace
MethodInvocation:getNodeId
MethodInvocation:getNodeId
MethodInvocation:trace
MethodInvocation:getNodeId
MethodInvocation:getNodeId
MethodInvocation:tryRelocateShard
MethodInvocation:weight
MethodInvocation:weight
MethodInvocation:sort
Method-name:buildWeightOrderedIndices
Method-returnType:String[]
Method-parameters:[]
MethodInvocation:toArray
MethodInvocation:keys
MethodInvocation:indicesRouting
MethodInvocation:routingTable
MethodInvocation:reset
MethodInvocation:delta
MethodInvocation:sort
Field:pivotWeight
Method-name:swap
Method-returnType:void
Method-parameters:[int i, int j]
Method-name:compare
Method-returnType:int
Method-parameters:[int i, int j]
MethodInvocation:compare
Method-name:setPivot
Method-returnType:void
Method-parameters:[int i]
Method-name:comparePivot
Method-returnType:int
Method-parameters:[int j]
MethodInvocation:compare
Method-name:moveShards
Method-returnType:void
Method-parameters:[]
MethodInvocation:nodeInterleavedShardIterator
MethodInvocation:routingNodes
MethodInvocation:hasNext
MethodInvocation:next
MethodInvocation:decideMove
MethodInvocation:isDecisionTaken
MethodInvocation:forceMove
MethodInvocation:get
MethodInvocation:currentNodeId
MethodInvocation:get
MethodInvocation:getId
MethodInvocation:getTargetNode
MethodInvocation:removeShard
MethodInvocation:relocateShard
MethodInvocation:getNodeId
MethodInvocation:getShardSize
MethodInvocation:clusterInfo
MethodInvocation:changes
MethodInvocation:addShard
MethodInvocation:v2
MethodInvocation:isTraceEnabled
MethodInvocation:trace
MethodInvocation:getRoutingNode
MethodInvocation:isDecisionTaken
MethodInvocation:canRemain
MethodInvocation:trace
MethodInvocation:index
MethodInvocation:id
Method-name:decideMove
Method-returnType:MoveDecision
Method-parameters:[final ShardRouting shardRouting]
Method-name:buildModelFromAssigned
Method-returnType:Map<String,ModelNode>
Method-parameters:[]
Method-name:allocateUnassigned
Method-returnType:void
Method-parameters:[]
Method-name:decideAllocateUnassigned
Method-returnType:AllocateUnassignedDecision
Method-parameters:[final ShardRouting shard, final Set<ModelNode> throttledNodes]
MethodInvocation:assignedToNode
MethodInvocation:debugDecision
MethodInvocation:canAllocate
MethodInvocation:deciders
MethodInvocation:type
MethodInvocation:no
MethodInvocation:size
MethodInvocation:size
MethodInvocation:no
MethodInvocation:values
MethodInvocation:contains
MethodInvocation:containsShard
MethodInvocation:weight
MethodInvocation:getIndexName
MethodInvocation:canAllocate
MethodInvocation:deciders
MethodInvocation:getRoutingNode
MethodInvocation:put
MethodInvocation:getNodeId
MethodInvocation:node
MethodInvocation:getRoutingNode
MethodInvocation:add
MethodInvocation:tuple
MethodInvocation:getNodeId
MethodInvocation:type
MethodInvocation:type
MethodInvocation:type
MethodInvocation:type
MethodInvocation:id
MethodInvocation:highestPrimary
MethodInvocation:getName
MethodInvocation:index
MethodInvocation:highestPrimary
MethodInvocation:getIndexName
MethodInvocation:type
MethodInvocation:sort
MethodInvocation:compare
MethodInvocation:v2
MethodInvocation:v2
MethodInvocation:get
MethodInvocation:v1
MethodInvocation:add
MethodInvocation:getNode
MethodInvocation:getCanAllocateDecision
MethodInvocation:fromDecision
MethodInvocation:node
Field:BY_DESCENDING_SHARD_ID
MethodInvocation:reversed
MethodInvocation:comparing
Method-name:tryRelocateShard
Method-returnType:boolean
Method-parameters:[ModelNode minNode, ModelNode maxNode, String idx]
Class:ModelNode
Field:indices
Field:numShards
Field:routingNode
Method-name:ModelNode
Method-returnType:null
Method-parameters:[RoutingNode routingNode]
FieldAccess:routingNode
Method-name:getIndex
Method-returnType:ModelIndex
Method-parameters:[String indexId]
MethodInvocation:get
Method-name:getNodeId
Method-returnType:String
Method-parameters:[]
MethodInvocation:nodeId
Method-name:getRoutingNode
Method-returnType:RoutingNode
Method-parameters:[]
Method-name:numShards
Method-returnType:int
Method-parameters:[]
Method-name:numShards
Method-returnType:int
Method-parameters:[String idx]
MethodInvocation:get
MethodInvocation:numShards
Method-name:highestPrimary
Method-returnType:int
Method-parameters:[String index]
MethodInvocation:get
MethodInvocation:highestPrimary
Method-name:addShard
Method-returnType:void
Method-parameters:[ShardRouting shard]
MethodInvocation:get
MethodInvocation:getIndexName
MethodInvocation:getIndexName
MethodInvocation:put
MethodInvocation:getIndexId
MethodInvocation:addShard
Method-name:removeShard
Method-returnType:void
Method-parameters:[ShardRouting shard]
MethodInvocation:get
MethodInvocation:getIndexName
MethodInvocation:removeShard
MethodInvocation:numShards
MethodInvocation:remove
MethodInvocation:getIndexName
Method-name:toString
Method-returnType:String
Method-parameters:[]
MethodInvocation:append
MethodInvocation:append
MethodInvocation:append
MethodInvocation:nodeId
MethodInvocation:toString
Method-name:iterator
Method-returnType:Iterator<ModelIndex>
Method-parameters:[]
MethodInvocation:iterator
MethodInvocation:values
Method-name:containsShard
Method-returnType:boolean
Method-parameters:[ShardRouting shard]
MethodInvocation:getIndex
MethodInvocation:getIndexName
MethodInvocation:containsShard
Class:ModelIndex
Field:id
Field:shards
Field:highestPrimary
Method-name:ModelIndex
Method-returnType:null
Method-parameters:[String id]
FieldAccess:id
Method-name:highestPrimary
Method-returnType:int
Method-parameters:[]
MethodInvocation:primary
MethodInvocation:max
MethodInvocation:id
Method-name:getIndexId
Method-returnType:String
Method-parameters:[]
Method-name:numShards
Method-returnType:int
Method-parameters:[]
MethodInvocation:size
Method-name:iterator
Method-returnType:Iterator<ShardRouting>
Method-parameters:[]
MethodInvocation:iterator
Method-name:removeShard
Method-returnType:void
Method-parameters:[ShardRouting shard]
Method-name:addShard
Method-returnType:void
Method-parameters:[ShardRouting shard]
Method-name:containsShard
Method-returnType:boolean
Method-parameters:[ShardRouting shard]
MethodInvocation:contains
Class:NodeSorter
Field:modelNodes
Field:weights
Field:function
Field:index
Field:balancer
Field:pivotWeight
Method-name:NodeSorter
Method-returnType:null
Method-parameters:[ModelNode[] modelNodes, WeightFunction function, Balancer balancer]
FieldAccess:function
FieldAccess:balancer
FieldAccess:modelNodes
Method-name:reset
Method-returnType:void
Method-parameters:[String index, int from, int to]
FieldAccess:index
MethodInvocation:weight
MethodInvocation:sort
Method-name:reset
Method-returnType:void
Method-parameters:[String index]
MethodInvocation:reset
Method-name:weight
Method-returnType:float
Method-parameters:[ModelNode node]
MethodInvocation:weight
Method-name:swap
Method-returnType:void
Method-parameters:[int i, int j]
Method-name:compare
Method-returnType:int
Method-parameters:[int i, int j]
MethodInvocation:compare
Method-name:setPivot
Method-returnType:void
Method-parameters:[int i]
Method-name:comparePivot
Method-returnType:int
Method-parameters:[int j]
MethodInvocation:compare
Method-name:delta
Method-returnType:float
Method-parameters:[]
